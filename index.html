<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ù„Ù‰ Ù†ÙˆÙ†ØªÙŠ (Ø­Ù†ÙŠÙ† H) ğŸ’—</title>
    <!-- ØªØ­Ù…ÙŠÙ„ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ØªØ­Ù…ÙŠÙ„ Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Ø®Ø· "Cairo" Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ø¸Ù‡Ø± Ø¹ØµØ±ÙŠ */
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
        :root {
            --primary-pink: #ff69b4; /* Pink (Hot Pink) */
            --dark-bg: #1a1a2e; /* Dark Blue/Purple */
        }
        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--dark-bg);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
            overflow-y: auto; /* Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø·ÙˆÙŠÙ„Ø§Ù‹ */
            position: relative;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø´Ø¹Ø© */
        .glow-button {
            transition: all 0.3s ease;
            box-shadow: 0 0 10px var(--primary-pink), 0 0 20px rgba(255, 105, 180, 0.5);
        }
        .glow-button:hover {
            box-shadow: 0 0 15px var(--primary-pink), 0 0 30px var(--primary-pink);
            transform: scale(1.05);
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ù…Ø´ØºÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ */
        #audio-player-controls {
            background-color: rgba(42, 42, 70, 0.8);
            backdrop-filter: blur(5px);
        }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ù‚Ù„ÙˆØ¨ (Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª) */
        .heart {
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: var(--primary-pink);
            transform: rotate(-45deg);
            pointer-events: none; /* Ù„Ø§ ØªØªØ¯Ø§Ø®Ù„ Ù…Ø¹ Ø§Ù„Ù†Ù‚Ø± */
            animation: heart-fall linear infinite;
            z-index: 0;
            opacity: 0;
        }

        .heart::before,
        .heart::after {
            content: "";
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: var(--primary-pink);
            border-radius: 50%;
        }

        .heart::before {
            top: -50%;
            left: 0;
        }

        .heart::after {
            top: 0;
            left: 50%;
        }

        @keyframes heart-fall {
            0% { transform: translateY(0) rotate(-45deg); opacity: 1; }
            100% { transform: translateY(-100vh) rotate(-45deg); opacity: 0; }
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø´Ø§Ø´Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠ (Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù…ÙˆØ¯Ø§Ù„) */
        .cinematic-modal-content {
            background: rgba(0, 0, 0, 0.95);
            max-width: 90vw;
            max-height: 90vh;
            box-shadow: 0 0 50px rgba(255, 105, 180, 0.5);
        }

        .cinematic-image {
            transition: opacity 1.5s ease-in-out;
        }
    </style>
</head>
<body class="p-4 relative">

    <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù‚Ù„ÙˆØ¨ (Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª) -->
    <div id="heart-container" class="fixed inset-0 pointer-events-none z-0"></div>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ø·Ø¨Ù‚Ø© Ø¹Ù„ÙˆÙŠØ©) -->
    <div class="relative z-10 flex flex-col items-center justify-center text-center w-full max-w-4xl mx-auto py-10">

        <!-- Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„ØµÙØ­Ø© -->
        <h1 id="main-title" class="text-6xl md:text-8xl font-extrabold text-white mb-8 p-4 rounded-xl relative">
            <span style="text-shadow: 0 0 15px var(--primary-pink), 0 0 30px rgba(255, 105, 180, 0.8);">
                Nonty (Haneen (H)ğŸ’—)
            </span>
        </h1>

        <p class="text-xl text-gray-300 mb-12">Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ ÙÙŠ Ø¹Ø§Ù„Ù…Ù†Ø§ Ø§Ù„Ø®Ø§Øµ!</p>

        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->
        <div class="flex flex-wrap justify-center gap-6 mb-16">
            <button onclick="openMessageModal()" class="glow-button flex items-center bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-6 rounded-full text-lg shadow-lg">
                <i data-lucide="message-square-heart" class="w-6 h-6 ml-2"></i>
                Ø§ÙƒØªØ¨ÙŠ Ù„ÙŠ Ø´ÙŠØ¦Ù‹Ø§
            </button>
            <button onclick="openCinematicModal()" class="glow-button flex items-center bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-full text-lg shadow-lg">
                <i data-lucide="monitor-play" class="w-6 h-6 ml-2"></i>
                Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠ
            </button>
        </div>

        <!-- Ù…Ù†Ø·Ù‚Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) -->
        <div id="messages-display" class="w-full max-w-lg mt-8 p-4 bg-gray-800 rounded-xl shadow-2xl hidden">
            <h2 class="text-2xl font-bold mb-4 text-pink-300">Ø±Ø³Ø§Ø¦Ù„Ù‡Ø§ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©:</h2>
            <div id="messages-list" class="space-y-3 max-h-48 overflow-y-auto">
                <p class="text-gray-400">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ø¨Ø¹Ø¯.</p>
            </div>
        </div>

    </div>

    <!-- Ù…Ø´ØºÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ (Ø«Ø§Ø¨Øª ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„) -->
    <div id="audio-player-controls" class="fixed bottom-0 w-full p-4 rounded-t-2xl shadow-2xl z-20">
        <div class="flex flex-col md:flex-row items-center justify-center max-w-xl mx-auto space-y-3 md:space-y-0 md:space-x-6 md:space-x-reverse">
            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£ØºÙ†ÙŠØ© -->
            <div class="text-center md:text-right flex-grow">
                <p class="text-sm text-pink-400">Ù‚ÙŠØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„:</p>
                <p id="current-song-title" class="text-lg font-semibold text-white">ØªØ­Ù…ÙŠÙ„...</p>
            </div>
            <!-- Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… -->
            <div class="flex items-center space-x-4 space-x-reverse">
                <button onclick="prevTrack()" class="p-2 rounded-full hover:bg-gray-700 transition">
                    <i data-lucide="skip-back" class="w-6 h-6 text-pink-400"></i>
                </button>
                <button id="play-pause-btn" onclick="togglePlayPause()" class="p-4 bg-pink-500 rounded-full hover:bg-pink-600 transition glow-button">
                    <i id="play-pause-icon" data-lucide="play" class="w-8 h-8 text-white"></i>
                </button>
                <button onclick="nextTrack()" class="p-2 rounded-full hover:bg-gray-700 transition">
                    <i data-lucide="skip-forward" class="w-6 h-6 text-pink-400"></i>
                </button>
            </div>
        </div>
        <audio id="audio-player" onended="nextTrack()"></audio>
    </div>

    <!-- Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© -->
    <div id="message-modal" class="fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4 hidden">
        <div class="bg-gray-900 p-8 rounded-2xl shadow-2xl w-full max-w-md border-2 border-pink-500 cinematic-modal-content">
            <h2 class="text-3xl font-bold text-center mb-6 text-pink-400">Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ù†ÙˆÙ†ØªÙŠ â¤ï¸</h2>
            <textarea id="message-input" rows="4" placeholder="Ø§ÙƒØªØ¨ÙŠ Ù…Ø§ ÙŠØ¬ÙˆÙ„ ÙÙŠ Ø®Ø§Ø·Ø±Ùƒ..."
                      class="w-full p-4 mb-4 bg-gray-800 border border-gray-700 rounded-lg focus:ring-pink-500 focus:border-pink-500 text-white"></textarea>

            <div class="flex justify-between items-center">
                <button onclick="saveMessage()" class="glow-button bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-full transition">
                    Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                </button>
                <button onclick="closeMessageModal()" class="text-gray-400 hover:text-white transition">
                    Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
            <p id="message-status" class="mt-4 text-center text-sm text-green-400 hidden">ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­!</p>
        </div>
    </div>

    <!-- Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ù„Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠ -->
    <div id="cinematic-modal" class="fixed inset-0 bg-black bg-opacity-95 z-50 flex items-center justify-center p-4 hidden">
        <div class="relative w-full h-full flex items-center justify-center">
            <!-- Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ -->
            <button onclick="closeCinematicModal()" class="absolute top-4 right-4 text-white p-3 rounded-full bg-gray-800 hover:bg-gray-700 z-50">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>

            <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„ØµÙˆØ±Ø© -->
            <div class="w-full h-full flex items-center justify-center">
                <img id="cinematic-image" src="" alt="ØµÙˆØ±Ø© Ø§Ù„Ø¥Ù‡Ø¯Ø§Ø¡" class="cinematic-image max-w-full max-h-full object-contain rounded-lg shadow-2xl opacity-0 transition-opacity duration-1000">
            </div>

            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØµÙˆØ±Ø© -->
            <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-50 p-3 rounded-xl text-white text-center">
                <p id="cinematic-caption" class="text-lg font-semibold"></p>
                <p id="cinematic-counter" class="text-sm text-gray-400"></p>
            </div>
        </div>
    </div>


    <!-- Ø³ÙƒØ±Ø¨Øª Firebase Ùˆ JavaScript -->
    <script type="module">
        // Ù…ØªØºÙŠØ±Ø§Øª Firebase Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠØ©
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, doc, addDoc, onSnapshot, query, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Ø¥Ø¹Ø¯Ø§Ø¯ Firebase
        let app, db, auth, userId;
        let isFirebaseReady = false;

        if (firebaseConfig) {
            try {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                setLogLevel('Debug'); // ØªÙØ¹ÙŠÙ„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

                onAuthStateChanged(auth, async (user) => {
                    if (!user) {
                        if (initialAuthToken) {
                            await signInWithCustomToken(auth, initialAuthToken);
                        } else {
                            await signInAnonymously(auth);
                        }
                    }
                    // Ø¨Ù…Ø¬Ø±Ø¯ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø³ÙˆØ§Ø¡ ÙƒØ§Ù† Ø¶ÙŠÙÙ‹Ø§ Ø£Ùˆ Ù…Ø³ØªØ®Ø¯Ù…Ù‹Ø§ ÙØ¹Ù„ÙŠÙ‹Ø§)
                    userId = auth.currentUser?.uid || crypto.randomUUID();
                    isFirebaseReady = true;

                    console.log('Firebase and Auth Ready. User ID:', userId);

                    // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ù…ÙƒØ§Ù† Ù…Ø§ Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
                    // Ø¨Ù…Ø§ Ø£Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø®ØµØµØŒ Ø³Ù†Ø¸Ù‡Ø± Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ…
                    document.getElementById('main-title').title = `Your User ID: ${userId}`;
                    
                    // Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ Ù†Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„
                    if (isFirebaseReady) {
                        setupMessageListener();
                    }
                });

            } catch (error) {
                console.error("Firebase Initialization Error:", error);
            }
        } else {
            console.error("Firebase config is missing. Message sending will not work.");
        }


        // **********************************************
        // 1. Ù…Ù†Ø·Ù‚ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ (Firestore)
        // **********************************************

        window.openMessageModal = function() {
            document.getElementById('message-modal').classList.remove('hidden');
            document.getElementById('message-status').classList.add('hidden');
        }

        window.closeMessageModal = function() {
            document.getElementById('message-modal').classList.add('hidden');
            document.getElementById('message-input').value = ''; // Ù…Ø³Ø­ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
        }

        window.saveMessage = async function() {
            if (!isFirebaseReady) {
                console.error("Firebase is not ready yet.");
                document.getElementById('message-status').textContent = 'Ø§Ù„Ù†Ø¸Ø§Ù… ØºÙŠØ± Ø¬Ø§Ù‡Ø² Ø¨Ø¹Ø¯ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
                document.getElementById('message-status').classList.remove('hidden');
                document.getElementById('message-status').classList.remove('text-green-400', 'text-red-400');
                document.getElementById('message-status').classList.add('text-yellow-400');
                return;
            }

            const messageText = document.getElementById('message-input').value.trim();
            const statusElement = document.getElementById('message-status');
            
            statusElement.classList.add('hidden');

            if (messageText.length < 5) {
                statusElement.textContent = 'Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù‚ØµÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 5 Ø£Ø­Ø±Ù).';
                statusElement.classList.remove('hidden', 'text-green-400');
                statusElement.classList.add('text-red-400');
                return;
            }

            try {
                // Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø®Ø§Øµ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ Ù„Ø­Ù†ÙŠÙ†
                const messagesRef = collection(db, 'artifacts', appId, 'users', userId, 'haneen_messages');
                
                await addDoc(messagesRef, {
                    text: messageText,
                    timestamp: serverTimestamp(),
                    sender_id: userId,
                });

                statusElement.textContent = 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­! â¤ï¸';
                statusElement.classList.remove('hidden', 'text-red-400');
                statusElement.classList.add('text-green-400');
                
                // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø¹Ø¯ 2 Ø«ÙˆØ§Ù†Ù
                setTimeout(() => {
                    closeMessageModal();
                }, 2000);

            } catch (e) {
                console.error("Error adding document: ", e);
                statusElement.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.';
                statusElement.classList.remove('hidden', 'text-green-400');
                statusElement.classList.add('text-red-400');
            }
        }

        function setupMessageListener() {
            // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙ‚Ø·
            const messagesRef = collection(db, 'artifacts', appId, 'users', userId, 'haneen_messages');
            const q = query(messagesRef);

            onSnapshot(q, (snapshot) => {
                const messagesList = document.getElementById('messages-list');
                const messages = [];

                snapshot.forEach((doc) => {
                    const data = doc.data();
                    const date = data.timestamp?.toDate ? data.timestamp.toDate().toLocaleDateString('ar-EG') : 'Ø§Ù„Ø¢Ù†';
                    messages.push({ ...data, date });
                });

                if (messages.length > 0) {
                    messages.sort((a, b) => (b.timestamp?.seconds || 0) - (a.timestamp?.seconds || 0)); // ØªØ±ØªÙŠØ¨ ØªÙ†Ø§Ø²Ù„ÙŠ
                    messagesList.innerHTML = messages.map(msg => `
                        <div class="bg-gray-700 p-3 rounded-lg border-l-4 border-pink-400">
                            <p class="text-sm italic text-gray-300">${msg.date}</p>
                            <p class="text-white">${msg.text}</p>
                        </div>
                    `).join('');
                    document.getElementById('messages-display').classList.remove('hidden');
                } else {
                    messagesList.innerHTML = '<p class="text-gray-400">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ø¨Ø¹Ø¯.</p>';
                    document.getElementById('messages-display').classList.add('hidden');
                }
            }, (error) => {
                console.error("Error listening to messages:", error);
                document.getElementById('messages-list').innerHTML = '<p class="text-red-400">ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„.</p>';
            });
        }
        
        // **********************************************
        // 2. Ù…Ù†Ø·Ù‚ Ù…Ø´ØºÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰
        // **********************************************

        const audioPlayer = document.getElementById('audio-player');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const playPauseIcon = document.getElementById('play-pause-icon');
        const currentSongTitle = document.getElementById('current-song-title');
        
        /*
        * ---------------------------------------------------
        * âœ… Ù…ÙƒØ§Ù† Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£ØºØ§Ù†ÙŠ (ØªÙ… ØªØµØ­ÙŠØ­ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ù„ØµÙŠØºØ© RAW/Ù…Ø¨Ø§Ø´Ø±Ø©):
        * ---------------------------------------------------
        */
        const playlist = [
            // ØªÙ… ØªØ­ÙˆÙŠÙ„ Ø±Ø§Ø¨Ø· GitHub 'blob' Ø¥Ù„Ù‰ 'raw'
            { 
                title: "All of Me - John Legend", 
                url: "https://raw.githubusercontent.com/Omar56154/Nonty-Gift/be794226aad47178af03cc6e629e4fc4a6d41a8a/audio/spotidownloader.com%20-%20All%20of%20Me%20-%20John%20Legend.mp3" 
            },
            // ØªÙ… ØªØ­ÙˆÙŠÙ„ Ø±Ø§Ø¨Ø· GitHub 'blob' Ø¥Ù„Ù‰ 'raw'
            { 
                title: "Love Me Like You Do - Ellie Goulding", 
                url: "https://raw.githubusercontent.com/Omar56154/Nonty-Gift/3aae9ab6a5bda9bd780d0d7b5b33ca836d49eaf1/audio/Love%20Me%20Like%20You%20Do%20-%20Ellie%20Goulding.mp3" 
            },
            // ØªÙ… ØªØ­ÙˆÙŠÙ„ Ø±Ø§Ø¨Ø· GitHub 'blob' Ø¥Ù„Ù‰ 'raw'
            { 
                title: "Ø­Ø³ÙŠÙ†ÙŠ", 
                url: "https://raw.githubusercontent.com/Omar56154/Nonty-Gift/edbd99caca421fd6462cbd732dfe15fb5309dade/audio/TUL8TE%20-%20Heseeny%20I%20%D8%AA%D9%88%D9%88%D9%84%D9%8A%D8%AA%20-%20%D8%AD%D8%B3%D9%8A%D9%86%D9%8A(MP3_160K).mp3" 
            },
            // ØªÙ… ØªØ­ÙˆÙŠÙ„ Ø±Ø§Ø¨Ø· GitHub 'blob' Ø¥Ù„Ù‰ 'raw'
            { 
                title: "Ø¯Ø§ Ù„Ùˆ Ø§ØªØ³Ø§Ø¨", 
                url: "https://raw.githubusercontent.com/Omar56154/Nonty-Gift/3327b0ec6c186f84141e3f253772056e112ae1e9/audio/Amr%20Diab%20-%20Da%20Law%20Etsab%20(Official%20Lyric%20Video)%20_%20(%D9%83%D9%84%D9%85%D8%A7%D8%AA)%20%D8%B9%D9%85%D8%B1%D9%88%20%D8%AF%D9%8A%D8%A7%D8%A8%20-%20%D8%AF%D9%87%20%D9%84%D9%88%20%D8%A5%D8%AA%D8%B3%D8%A7%D8%A8(MP3_160K).mp3" 
            },
            // ØªÙ… ØªØ­ÙˆÙŠÙ„ Ø±Ø§Ø¨Ø· GitHub 'blob' Ø¥Ù„Ù‰ 'raw'
            { 
                title: "Ø§Ù†Ø§ ÙˆØ§Ù†Øª", 
                url: "https://raw.githubusercontent.com/Omar56154/Nonty-Gift/12b1f67965c7d6a51489b667973993c3c4fbbc53/audio/Amr%20Diab%20-%20Ana%20W%20Enta%20(Official%20Lyric%20Video)%20_%20(%D9%83%D9%84%D9%85%D8%A7%D8%AA)%20%D8%B9%D9%85%D8%B1%D9%88%20%D8%AF%D9%8A%D8%A7%D8%A8%20-%20%D8%A3%D9%86%D8%A7%20%D9%88%20%D8%A3%D9%86%D8%AA(MP3_160K).mp3" 
            },
        ];
        
        let currentTrackIndex = 0;

        function loadTrack(index) {
            currentTrackIndex = index % playlist.length;
            if (currentTrackIndex < 0) {
                currentTrackIndex = playlist.length - 1;
            }
            const track = playlist[currentTrackIndex];
            audioPlayer.src = track.url;
            currentSongTitle.textContent = track.title;
            audioPlayer.load();
        }

        window.togglePlayPause = function() {
            if (audioPlayer.paused) {
                audioPlayer.play();
                lucide.createIcons(); // Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©
                playPauseIcon.setAttribute('data-lucide', 'pause');
            } else {
                audioPlayer.pause();
                lucide.createIcons();
                playPauseIcon.setAttribute('data-lucide', 'play');
            }
            // Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø³Ù… Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«
            setTimeout(() => { lucide.createIcons(); }, 10);
        }

        window.nextTrack = function() {
            const wasPlaying = !audioPlayer.paused;
            loadTrack(currentTrackIndex + 1);
            if (wasPlaying) {
                audioPlayer.play();
            }
        }

        window.prevTrack = function() {
            const wasPlaying = !audioPlayer.paused;
            loadTrack(currentTrackIndex - 1);
            if (wasPlaying) {
                audioPlayer.play();
            }
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ØºÙ†ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ø§Ù„ÙÙ‡Ø±Ø³ 1) Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
        loadTrack(1);

        // **********************************************
        // 3. Ù…Ù†Ø·Ù‚ Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠ
        // **********************************************

        /*
        * ---------------------------------------------------
        * âœ… Ù…ÙƒØ§Ù† Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ± (ØªÙ… ØªØµØ­ÙŠØ­ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ù„ØµÙŠØºØ© RAW/Ù…Ø¨Ø§Ø´Ø±Ø©):
        * ---------------------------------------------------
        */
        const cinematicImages = [
            // ØªÙ… ØªØ­ÙˆÙŠÙ„ Ø±Ø§Ø¨Ø· GitHub 'blob' Ø¥Ù„Ù‰ 'raw'
            { 
                url: "https://raw.githubusercontent.com/Omar56154/Nonty-Gift/12b1f67965c7d6a51489b667973993c3c4fbbc53/images/nontymain.png", 
                caption: "Ø¨Ø­Ø¨Ù‡Ø§Ø§Ø§" 
            },
            // ØªÙ… ØªØ­ÙˆÙŠÙ„ Ø±Ø§Ø¨Ø· GitHub 'blob' Ø¥Ù„Ù‰ 'raw'
            { 
                url: "https://raw.githubusercontent.com/Omar56154/Nonty-Gift/320b9c789c93e40c0ce55499c0316fbd660dcab2/images/First%20Say.png", 
                caption: "Ø§ÙˆÙ„ Ù…Ø±Ù‡ ØªÙ‚ÙˆÙ„Ù‡Ø§Ø§Ø§" 
            },
            // ØµÙˆØ±Ø© placeholder
            { url: "https://placehold.co/800x600/0000ff/ffffff?text=ØµÙˆØ±Ø©+3", caption: "Ù„Ø­Ø¸Ø§Øª Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© Ø§Ù„Ø£Ø¨Ø¯ÙŠØ©" },
            // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù‡Ù†Ø§: { url: "Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©", caption: "ÙˆØµÙ Ù„Ù„ØµÙˆØ±Ø©" },
        ];

        let cinematicTimer;
        let currentImageIndex = 0;
        const cinematicImageElement = document.getElementById('cinematic-image');
        const cinematicCaptionElement = document.getElementById('cinematic-caption');
        const cinematicCounterElement = document.getElementById('cinematic-counter');
        const SLIDESHOW_DURATION = 4000; // 4 Ø«ÙˆØ§Ù†ÙŠ Ù„ÙƒÙ„ ØµÙˆØ±Ø©

        function showImage(index) {
            if (cinematicImages.length === 0) return;

            currentImageIndex = index % cinematicImages.length;
            if (currentImageIndex < 0) {
                currentImageIndex = cinematicImages.length - 1;
            }

            const image = cinematicImages[currentImageIndex];

            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØµÙˆØ±Ø© Ù‚Ø¨Ù„ ØªØºÙŠÙŠØ± Ø§Ù„Ù…ØµØ¯Ø±
            cinematicImageElement.classList.remove('opacity-100');
            cinematicImageElement.classList.add('opacity-0');

            setTimeout(() => {
                // ØªØºÙŠÙŠØ± Ø§Ù„Ù…ØµØ¯Ø± ÙˆØ§Ù„ØªØ³Ù…ÙŠØ©
                cinematicImageElement.src = image.url;
                cinematicCaptionElement.textContent = image.caption;
                cinematicCounterElement.textContent = `ØµÙˆØ±Ø© ${currentImageIndex + 1} Ù…Ù† ${cinematicImages.length}`;

                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙˆØ±Ø© ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹
                cinematicImageElement.classList.remove('opacity-0');
                cinematicImageElement.classList.add('opacity-100');
            }, 500); // Ù†ØµÙ Ø«Ø§Ù†ÙŠØ© Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ (fade out)
        }

        function startSlideshow() {
            if (cinematicImages.length === 0) return;
            showImage(currentImageIndex);
            
            cinematicTimer = setInterval(() => {
                showImage(currentImageIndex + 1);
            }, SLIDESHOW_DURATION);
        }

        window.openCinematicModal = function() {
            document.getElementById('cinematic-modal').classList.remove('hidden');
            startSlideshow();
        }

        window.closeCinematicModal = function() {
            document.getElementById('cinematic-modal').classList.add('hidden');
            clearInterval(cinematicTimer);
            cinematicImageElement.classList.remove('opacity-100');
            cinematicImageElement.classList.add('opacity-0');
            currentImageIndex = 0; // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ù„Ù„Ø¨Ø¯Ø§ÙŠØ© ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©
        }


        // **********************************************
        // 4. ØªØ£Ø«ÙŠØ± Ø§Ù„Ù‚Ù„ÙˆØ¨ Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© (Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª)
        // **********************************************

        const heartContainer = document.getElementById('heart-container');

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            
            // ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø¹Ø´ÙˆØ§Ø¦ÙŠ ÙÙŠ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³ÙÙ„ÙŠ Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø©
            const size = Math.random() * 20 + 10; // Ø­Ø¬Ù… Ø¨ÙŠÙ† 10px Ùˆ 30px
            const duration = Math.random() * 5 + 7; // Ù…Ø¯Ø© Ø§Ù„Ø­Ø±ÙƒØ© Ø¨ÙŠÙ† 7s Ùˆ 12s
            const delay = Math.random() * 2; // ØªØ£Ø®ÙŠØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠ

            heart.style.width = `${size}px`;
            heart.style.height = `${size}px`;
            heart.style.left = `${Math.random() * 100}vw`; // Ù…ÙˆÙ‚Ø¹ Ø£ÙÙ‚ÙŠ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
            heart.style.bottom = `-${size}px`; // ÙŠØ¨Ø¯Ø£ Ù…Ù† Ø£Ø³ÙÙ„ Ø§Ù„Ø´Ø§Ø´Ø©
            heart.style.animationDuration = `${duration}s`;
            heart.style.animationDelay = `${delay}s`;

            // Ù„Ø¬Ø¹Ù„ Ø§Ù„Ù‚Ù„ÙˆØ¨ ØªØªØ­Ø±Ùƒ Ø¨Ø§ØªØ¬Ø§Ù‡ Ù…Ø®ØªÙ„Ù Ù‚Ù„ÙŠÙ„Ø§Ù‹
            const moveX = (Math.random() - 0.5) * 50; // Ø­Ø±ÙƒØ© Ø£ÙÙ‚ÙŠØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
            heart.style.setProperty('--move-x', `${moveX}px`);

            heartContainer.appendChild(heart);

            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù‚Ù„Ø¨ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø­Ø±ÙƒØªÙ‡ Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ø°Ø§ÙƒØ±Ø©
            setTimeout(() => {
                heart.remove();
            }, (duration + delay) * 1000);
        }

        function startHeartEffect() {
            // Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ ÙƒÙ„ 300 Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©
            setInterval(createHeart, 300);
            // Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ù„ÙˆØ¨ Ø£ÙˆÙ„ÙŠØ© Ù„Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø³Ø±Ø¹Ø©
            for (let i = 0; i < 20; i++) {
                createHeart();
            }
        }

        // ØªØ´ØºÙŠÙ„ ØªØ£Ø«ÙŠØ± Ø§Ù„Ù‚Ù„ÙˆØ¨ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = function() {
            startHeartEffect();
            lucide.createIcons(); // Ù„ØªÙØ¹ÙŠÙ„ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Lucide
        };

    </script>
</body>
</html>
